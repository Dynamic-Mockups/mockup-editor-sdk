var DynamicMockups=function(o){"use strict";return o.initDynamicMockupsIframe=({iframeId:o,data:t,mode:n,callback:e})=>{const r=(o,t)=>{o.forEach(((o,n)=>{const e=o.export_path,r="mockup"===t?`Mockup ${n+1}`:`Print file ${n+1}`;fetch(e).then((o=>{if(!o.ok)throw new Error(`Failed to fetch ${e}`);return o.blob()})).then((o=>{const t=document.createElement("a");t.href=window.URL.createObjectURL(o),t.download=r+"."+e.split(".").pop().toLowerCase(),t.click(),window.URL.revokeObjectURL(t.href)})).catch((o=>console.error("Error downloading the image:",o)))}))},i=document.getElementById(o);if(!i)return void console.error(`Iframe with ID '${o}' not found.`);i.src=i.src;const a=o=>{try{const t=new URL(o).hostname,n=t.split(".");return n.length<=2?t:n.slice(-2).join(".")}catch(o){return console.error("Invalid Main Domain:",o.message),""}},c=()=>{if(window.location.ancestorOrigins&&window.location.ancestorOrigins.length>0){const o=window.location.ancestorOrigins[window.location.ancestorOrigins.length-1];return a(o)}if(document.referrer&&document.referrer!==window.location.href){const o=a(document.referrer),t=a(window.location.origin);if(o&&o!==t)return o}return a(window.location.origin)||window.location.host};window.addEventListener("message",(o=>{if("dmIframeReady"===o.data&&i.contentWindow&&i.contentWindow.postMessage({...t,locationHost:c()},i.src),"COPY_TO_CLIPBOARD"===o.data?.type){const t=o.data.dataUrl,n=new Image;n.onload=function(){const o=document.createElement("canvas");o.width=n.width,o.height=n.height;o.getContext("2d").drawImage(n,0,0),o.toBlob((function(o){if(navigator.clipboard&&navigator.clipboard.write){const t=new ClipboardItem({"image/png":o});navigator.clipboard.write([t]).catch((o=>{console.error("Failed to copy image to clipboard:",o)}))}else console.error("Clipboard API not supported in this browser")}),"image/png")},n.src=t}if(o.data.mockupsAndPrintFilesExport)if("download"===n){r(o.data.mockupsAndPrintFilesExport.mockupsExport,"mockup");const t=o.data.mockupsAndPrintFilesExport.printFilesExport.flatMap((o=>o.print_files));r(t,"print-file")}else"custom"===n&&"function"==typeof e&&e(o.data);if(o.data.mockupsExport&&("download"===n?r(o.data.mockupsExport,"mockup"):"custom"===n&&"function"==typeof e&&e(o.data)),o.data.printFilesExport)if("download"===n){const t=o.data.printFilesExport.flatMap((o=>o.print_files));r(t,"print-file")}else"custom"===n&&"function"==typeof e&&e(o.data);"DYNAMIC_AI_SHOP_ADD_TO_CART"===o.data?.type&&"custom"===n&&"function"==typeof e&&e(o.data)}))},o}({});
